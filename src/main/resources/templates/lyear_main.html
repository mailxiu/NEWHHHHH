<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
	<meta name="keywords" content="LightYear,LightYearAdmin,光年,后台模板,后台管理系统,光年HTML模板">
	<meta name="description" content="Light Year Admin V5是一个基于Bootstrap v5.1.3的后台管理系统的HTML模板。">
	<title>首页 - 光年(Light Year Admin V4)后台管理系统模板</title>
	<link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-touch-fullscreen" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="default">
	<!-- 引入Material Design Icons确保图标显示 -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/material-design-icons@3.0.1/iconfont/material-icons.css">
	<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="css/style.min.css">

	<style>
		.stat-card {
			display: flex;
			align-items: center;
			justify-content: space-between;
			padding: 1rem;
			border-radius: 8px;
			color: #fff;
			height: 110px;
			box-sizing: border-box;
		}

		.stat-icon {
			width: 52px;
			height: 52px;
			border-radius: 50%;
			display: flex;
			align-items: center;
			justify-content: center;
			font-size: 1.5rem;
			margin-right: 1rem;
			flex-shrink: 0;
		}

		.stat-info {
			display: flex;
			flex-direction: column;
		}

		.stat-title {
			font-size: 1.15rem;
			font-weight: 600;
			margin-bottom: 0.25rem;
		}

		/* 单行数据样式 - 与标题字体大小完全一致 */
		.single-value {
			font-size: 1.15rem;
			font-weight: 600;
		}

		/* 双行数据容器 */
		.double-values {
			display: flex;
			flex-direction: column;
			align-items: flex-end;
		}

		.today {
			font-size: 1.1rem;
			font-weight: 500;
		}

		.yesterday {
			font-size: 0.875rem;
			opacity: 0.7;
			margin-top: 6px; /* 增加今日与昨日数据间距 */
		}
	</style>
</head>

<body>
<div class="container-fluid">

	<div class="row row-cols-1 row-cols-md-2 row-cols-xl-4 g-3">

		<!-- 收码卡片（修复图标） -->
		<div class="col">
			<div class="stat-card bg-primary">
				<div class="d-flex align-items-center">
					<div class="stat-icon bg-white bg-opacity-25">
						<i class="material-icons text-white">camera_alt</i> <!-- 使用相机图标作为扫码替代，兼容性更好 -->
					</div>
					<div class="stat-info">
						<div class="stat-title">扫码</div>
					</div>
				</div>
				<div class="double-values">
					<div class="today">今日 <span th:text="${records_count + '个'}">未知</span></div>
					<div class="yesterday">昨日 <span th:text="${records_count_yesterday + '个'}">未知</span></div>
				</div>
			</div>
		</div>

		<!-- 今日卖出卡片 -->
		<div class="col">
			<div class="stat-card" style="background-color: #7B1FA2;">
				<div class="d-flex align-items-center">
					<div class="stat-icon bg-white bg-opacity-25">
						<i class="material-icons text-white">shopping_cart</i>
					</div>
					<div class="stat-info">
						<div class="stat-title">卖出</div>
					</div>
				</div>
				<div class="double-values">
					<div class="today">今日 <span th:text="${today_sell_count + '个'}">未知</span></div>
					<div class="yesterday">昨日 <span th:text="${yesterday_sell_count + '个'}">未知</span></div>
				</div>
			</div>
		</div>

		<!-- 新增用户卡片 -->
		<div class="col">
			<div class="stat-card bg-success">
				<div class="d-flex align-items-center">
					<div class="stat-icon bg-white bg-opacity-25">
						<i class="material-icons text-white">arrow_downward</i>
					</div>
					<div class="stat-info">
						<div class="stat-title">新增用户</div>
					</div>
				</div>
				<div class="double-values">
					<div class="today">今日 <span th:text="${increase_count}">未知</span></div>
					<div class="yesterday">昨日 <span th:text="${increase_count_yesterday}">未知</span></div>
				</div>
			</div>
		</div>

		<!-- 用户总数卡片 -->
		<div class="col">
			<div class="stat-card bg-info">
				<div class="d-flex align-items-center">
					<div class="stat-icon bg-white bg-opacity-25">
						<i class="material-icons text-white">people</i>
					</div>
					<div class="stat-info">
						<div class="stat-title">用户总数</div>
					</div>
				</div>
				<div class="single-value">
					<span th:text="${members_count}">未知</span>
				</div>
			</div>
		</div>

		<!-- 今日会员卡片 -->
		<div class="col">
			<div class="stat-card bg-success">
				<div class="d-flex align-items-center">
					<div class="stat-icon bg-white bg-opacity-25">
						<i class="material-icons text-white">attach_money</i>
					</div>
					<div class="stat-info">
						<div class="stat-title">收款</div>
					</div>
				</div>
				<div class="double-values">
					<div class="today">今日 <span th:text="${today_member_amount + '元'}">0 元</span></div>
					<div class="yesterday">昨日 <span th:text="${yesterday_member_amount + '元'}">0 元</span></div>
				</div>
			</div>
		</div>

		<!-- 今日结算卡片 -->
		<div class="col">
			<div class="stat-card bg-warning">
				<div class="d-flex align-items-center">
					<div class="stat-icon bg-white bg-opacity-25">
						<i class="material-icons text-white">account_balance_wallet</i>
					</div>
					<div class="stat-info">
						<div class="stat-title">货款结算</div>
					</div>
				</div>
				<div class="double-values">
					<div class="today">今日 <span th:text="${today_settlement_amount + '元'}">0 元</span></div>
					<div class="yesterday">昨日 <span th:text="${yesterday_settlement_amount + '元'}">0 元</span></div>
				</div>
			</div>
		</div>

		<!-- 等待提现卡片 -->
		<div class="col">
			<div class="stat-card bg-purple">
				<div class="d-flex align-items-center">
					<div class="stat-icon bg-white bg-opacity-25">
						<i class="material-icons text-white">monetization_on</i>
					</div>
					<div class="stat-info">
						<div class="stat-title">等待提现</div>
					</div>
				</div>
				<div class="single-value">
					<span th:text="${withdrawals_count + '条'}">未知</span>
				</div>
			</div>
		</div>

		<!-- 未提现卡片（修复图标） -->
		<div class="col">
			<div class="stat-card bg-danger">
				<div class="d-flex align-items-center">
					<div class="stat-icon bg-white bg-opacity-25">
						<i class="material-icons text-white">credit_card</i> <!-- 使用信用卡图标作为未提现替代，兼容性更好 -->
					</div>
					<div class="stat-info">
						<div class="stat-title">未提现余额</div>
					</div>
				</div>
				<div class="single-value">
					<span th:text="${total_unwithdrawn + '元'}">未知</span>
				</div>
			</div>
		</div>

	</div>

	<div class="row mt-4">
		<div class="col-md-6">
			<div class="card">
				<div class="card-header">
					<div class="card-title">最近七日会员趋势</div>
				</div>
				<div class="card-body">
					<canvas class="js-chartjs-bars"></canvas>
				</div>
			</div>
		</div>

		<div class="col-md-6">
			<div class="card">
				<div class="card-header">
					<div class="card-title">最近七日回收趋势</div>
				</div>
				<div class="card-body">
					<canvas class="js-chartjs-lines"></canvas>
				</div>
			</div>
		</div>
	</div>

	<div class="row mt-4">
		<div class="col-lg-12">
			<div class="card">
				<header class="card-header">
					<div class="card-title">每日一言</div>
				</header>
				<div class="card-body">
					<figure id="speech" class="placeholder-glow text-start">
						<blockquote class="blockquote">
							<p id="speech_content" class="placeholder">爱上一个地方，就应该背上包去旅游，走得更远。</p>
						</blockquote>
						<figcaption id="speech_info" class="placeholder blockquote-footer ">
							<span id="speech_author">出自商务印书馆的</span>  <cite id="speech_origin" title="《新华字典》">《新华字典》</cite>
						</figcaption>
					</figure>
				</div>
			</div>
		</div>
	</div>

</div>

<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/popper.min.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<script type="text/javascript" src="js/chart.min.js"></script>
<script type="text/javascript" src="js/main.min.js"></script>
<script type="text/javascript" th:inline="javascript">
	$(document).ready(function(e) {
		var $dashChartBarsCnt = jQuery('.js-chartjs-bars')[0].getContext('2d'),
				$dashChartLinesCnt = jQuery('.js-chartjs-lines')[0].getContext('2d');

		var $dashChartBarsData = {
			labels: [[${memberCount_date}]],
			datasets: [{
				label: '注册用户',
				borderWidth: 1,
				borderColor: 'rgba(0, 0, 0, 0)',
				backgroundColor: 'rgba(0, 123, 255,0.5)',
				hoverBackgroundColor: "rgba(0, 123, 255, 0.7)",
				hoverBorderColor: "rgba(0, 0, 0, 0)",
				data: [[${memberCount_refer}]]
			},
				{
					label: '有效用户',
					borderWidth: 1,
					borderColor: 'rgba(0, 0, 0, 0)',
					backgroundColor: 'rgb(21,195,119)',
					hoverBackgroundColor: "rgb(21,195,119)",
					hoverBorderColor: "rgba(0, 0, 0, 0)",
					data: [[${memberCount_volume}]]
				}
			]
		};
		var $dashChartLinesData = {
			labels: [[${recordCount_date}]],
			datasets: [{
				label: '录入总数',
				data: [[${recordCount_refer}]],
				borderColor: '#007bff',
				backgroundColor: 'rgba(0, 123, 255, 0.175)',
				borderWidth: 1,
				fill: false,
				lineTension: 0.5
			},{
				label: '有效录入',
				data: [[${recordCount_volume}]],
				borderColor: '#0c8b0e',
				backgroundColor: 'rgba(0, 123, 255, 0.175)',
				borderWidth: 1,
				fill: false,
				lineTension: 0.5
			}]
		};

		new Chart($dashChartBarsCnt, {
			type: 'bar',
			data: $dashChartBarsData
		});

		var myLineChart = new Chart($dashChartLinesCnt, {
			type: 'line',
			data: $dashChartLinesData,
		});
	});
</script>
<script>
	var xhr = new XMLHttpRequest();
	xhr.open('get', 'https://v1.jinrishici.com/all.json');
	xhr.onreadystatechange = function () {
		if (xhr.readyState === 4) {
			var data = JSON.parse(xhr.responseText);
			$("#speech_content").removeClass('placeholder');
			$("#speech_info").removeClass('placeholder');
			$("#speech_content").text(data.content);
			$("#speech_author").text(data.author);
			$("#speech_origin").text('《'+data.origin+'》');
			$("#speech_origin").attr('title','《'+data.origin+'》');
		}
	};
	xhr.send();
</script>
</body>
</html>
